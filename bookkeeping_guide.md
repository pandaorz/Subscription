# Agent 記帳與財務分析指令指南

本文件提供針對 `expenses.csv` (實支) 與 `subscriptions.md` (預算) 的交互分析指令，協助您充分利用 Agent 進行家庭財務管理。

---

## 📂 情境一：記帳操作 (Recording)

### 1. 快速記帳 (Natural Language Entry)
* **指令**：`Agent，我今天繳了小孩的營養午餐費 800 元，用家裡的錢付的，說明是「2月午餐」。請幫我寫入 CSV。`
* **Agent 行為**：自動將其轉換為 `2026-01-25,Child,營養午餐,800,Family,2月午餐` 並新增至 `expenses.csv`。

### 2. 補漏記帳 (Check Missing)
* **指令**：`檢查 subscriptions.md 中這個月應該扣款的 [Tech] 項目，比對 expenses.csv，看看我有沒有忘了記哪一筆？`
* **功能**：防止自動扣款的項目忘記記帳。

### 3. 刪除或修改 (Correction)
* **指令**：`昨天的「羽球臨打」金額記錯了，應該是 350 元，不是 300 元，請幫我修正。` 或 `刪除 1月25日 那筆重複的「便利商店」支出。`
* **功能**：修正記錄錯誤。

### 4. 拆帳記錄 (Split Bill)
* **指令**：`今天跟朋友吃飯總共 2000 元，刷我的卡。其中 500 是我的個人伙食，剩下 1500 是幫朋友代墊（之後會還）。請幫我分兩筆記：一筆 [Life] 500，一筆 [Other] 1500 (備註: 代墊)。`
* **功能**：處理複雜的付款關係。

### 5. 批量固定支出 (Batch Entry)
* **指令**：`幫我把 subscriptions.md 裡面所有「每月10日」該扣款的訂閱（[Telecom], [Utility]），直接記入本月 expenses.csv，金額照舊。`
* **功能**：節省輸入重複性高之固定帳單的時間。

---

## 📂 情境二：教育成本分析 (Education Analysis)

### 1. 教育支出佔比 (Cost Ratio)
* **指令**：`統計今年度目前為止 [Child] 類別的總支出。分析其中「固定學雜費」與「額外才藝社團」的比例是多少？`
* **功能**：了解教育費用的結構。

### 2. 學期成本預測 (Semester Projection)
* **指令**：`基於 subscriptions.md 的設定，幫我預估「下個學期」我總共需要準備多少教育基金？（含學費、每月午餐與社團）`
* **功能**：提前準備現金流。

### 3. 單一子女分析 (Child Specific)
* **指令**：`分析「老大」過去一年在 expenses.csv 的總花費趨勢（包含學費與其他註明老大的支出）。`
* **功能**：比較不同子女的教育資源分配。

### 4. 補習單位成本 (Unit Cost)
* **指令**：`列出所有 [Child] 的補習費用，假設每週上課 2 堂，算一下平均「每堂課」的成本是多少？`
* **功能**：評估補習效益。

### 5. 年度預算檢視 (Yearly Budget)
* **指令**：`比較去年與今年的教育支出成長幅度。如果照這個速度，預測明年會不會超過 30 萬元的家庭教育預算？`
* **功能**：長期財務規劃預警。

---

## 📂 情境三：對帳與現金流 (Reconciliation)

### 1. 預算 vs 實際 (Budget vs Actual)
* **指令**：`分析本月 [Life] 類別，我的「實際支出 (CSV)」是否有超過「預期成本 (MD)」？超過多少？`
* **功能**：監控是否有超支狀況。

### 2. 家庭/個人 拆帳結算 (Family vs Personal)
* **指令**：`幫我結算本月截至今日，我個人代墊的款項 (Payer=Personal 但類別屬 Family) 有多少？等待撥款。`
* **功能**：清楚劃分公私帳戶。

### 3. 未付款項提醒 (Unpaid Alert)
* **指令**：`檢查本月尚未在 expenses.csv 出現，但 subscriptions.md 顯示繳費期限已過的帳單有哪些？`
* **功能**：防止帳單逾期滯納金。

### 4. 短期現金流預測 (Cash Flow Forecast)
* **指令**：`根據 subscriptions.md，接下來 10 天內，我大概需要準備多少現金來繳費？（包含信用卡扣款與現金支出）`
* **功能**：確保帳戶餘額充足。

### 5. 月底結算報告 (Monthly Closing)
* **指令**：`統計本月總支出，跟上個月比較，列出「差異最大」與「金額最高」的三個類別，並給我簡短評語。`
* **功能**：每月財務健康檢查。

---

## 📂 情境四：訂閱與固定支出管理 (Subscription Management)

### 1. 閒置訂閱盤點 (Audit)
* **指令**：`列出所有 subscriptions.md 中有「啟用提醒」的項目，比對 expenses.csv，找出過去三個月都沒記錄過的項目。`
* **功能**：找出可能忘了取消的殭屍訂閱。

### 2. 訂閱費率變更 (Price Change)
* **指令**：`Netflix 通知漲價到 750 元了。請修正 subscriptions.md，並告訴我這樣一年會多支出多少錢？`
* **功能**：即時反應成本變動。

### 3. 年度固定成本 (Fixed Cost Analysis)
* **指令**：`如果不消費任何娛樂與浮動餐飲，光是 subscriptions.md 裡的項目，我們家一年「最低生存成本」是多少？`
* **功能**：計算家庭財務的安全邊際。

### 4. 訂閱分類圖表 (Category Pie)
* **指令**：`請用文字或 ASCII 圖表，畫出我們家固定訂閱支出的佔比（Tech vs Telecom vs Utility）。`
* **功能**：視覺化成本分佈。

### 5. 即將到期合約 (Renewals)
* **指令**：`列出 subscriptions.md 中，所有「年繳」且繳費日即將在未來 2 個月內到期的項目，我要評估是否續約。`
* **功能**：避免被自動續約年費。

---

## 📂 情境五：生活與交通分析 (Life & Transport)

### 1. 運動成本分析 (Sports Cost)
* **指令**：`從 expenses.csv 統計本月打「羽球」的總費用（含臨打與固定場），平均一週花多少錢？`
* **功能**：監控興趣愛好支出。

### 2. 交通工具比較 (Vehicle Comparison)
* **指令**：`統計 [Transport] 類別，分析「機車（電池費）」與「汽車（油費）」的每月平均開銷差異。`
* **功能**：評估交通工具效益。

### 3. 娛樂純支出 (Entertainment Check)
* **指令**：`檢查 [Life] 類別，扣除「運動」相關關鍵字後，剩下的「純娛樂/聚餐」支出總額是多少？`
* **功能**：區分健康投資與純消費。

### 4. 週末消費效應 (Weekend Effect)
* **指令**：`分析 expenses.csv，我「週末 (六日)」的平均日花費，是否有顯著高於「平日」？高出多少百分比？`
* **功能**：檢視假日消費習慣。

### 5. 能源季節性分析 (Utility Seasonality)
* **指令**：`比較 [Utility] 類別中，最近一個月（冬季）的電費與瓦斯費，跟去年同期的數據（如果有的話）或平均值差異。`
* **功能**：監控能源使用異常。

---

## 💡 使用建議
- **學費通知單**: 當收到紙本學費單時，可直接拍照貼給 Agent (支援影像模型) 或輸入金額：「更新 MD 檔金額，並設 3天前提醒。」
- **CSV 維護**: 建議每月執行：「將上個月的 CSV 資料封存備份，保留本月資料為新檔案。」以維持回應速度。
